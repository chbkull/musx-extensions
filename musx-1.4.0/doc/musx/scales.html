<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>musx.scales API documentation</title>
<meta name="description" content="Defines the equal tempered chromatic scale over 11 octaves and provides a
mapping between three alternate representations of pitch material:
hertz
â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>musx.scales</code></h1>
</header>
<section id="section-intro">
<p>Defines the equal tempered chromatic scale over 11 octaves and provides a
mapping between three alternate representations of pitch material:
hertz
frequency, key numbers, Pitch instances, and pitch names.</p>
<p>Hertz values are integer or floating point numbers greater than 0.</p>
<p>MIDI key numbers are integers 0 to 127 representing equal tempered pitches C00
to G#9, with C4 (middle C) assigned to MIDI key number 60. Floating point key
numbers are also possible where a value <em>kkk.cc</em> is interpreted as a frequency
<em>cc</em> cents above the integer key number <em>kkk</em>. For example, 60.5 represents a
frequency 50 cents (a quarter tone) above Middle C.</p>
<p>Pitch names are strings containing a pitch letter, optional accidental, and
octave number. Pitch letters can be upper or lower case, and accidentals can
be "symbolic" (bb, b, '', #, ##) or "python safe" (ff, f, '', s, ss). See
documentation on <code>Pitch</code> for more information.</p>
<p><strong>The mapping functions:</strong></p>
<p>The following functions map between the three alternate representations
of frequency: </p>
<ul>
<li><code><a title="musx.scales.keynum" href="#musx.scales.keynum">keynum()</a></code> : converts a pitch name or hertz value into a key number.</li>
<li><code><a title="musx.scales.pitch" href="#musx.scales.pitch">pitch()</a></code> : converts a hertz value, key number or pitch name into a Pitch.</li>
<li><code><a title="musx.scales.hertz" href="#musx.scales.hertz">hertz()</a></code> : converts a pitch name or key number into a hertz value.</li>
</ul>
<p>All three functions can map individual values, lists of values,
and string sequences of values.</p>
<p><strong>Lists and string sequences:</strong></p>
<p>The three functions convert individual values, lists of values and string
sequences containing values. In a string sequence use spaces
to delimit the items:</p>
<ul>
<li>A string sequence of key numbers: '0 40 21 33 87 12'</li>
<li>A string sequence of hertz values: '440 880 220.12'</li>
<li>A string sequence of pitch names: 'c4 d4 eb4 f#4 g3'</li>
</ul>
<p>In any string sequence you can repeat an item by appending
one or more commas to its rightside. For example, the motive of Beethoven's 5th Symphony
'G4 G4 G4 Eb4' can be written as a pitch sequence 'G4,, Eb4',
a key number sequence '67,, 63', or a hertz sequence '392,, 311'. </p>
<p>A string sequence of pitches also supports "sticky" octave numbers: once
an octave number is provided it remains in effect until a different octave is given.
For example a diatonic scale from A3 to A4 is 'a3 b c4 d e f g a'.</p>
<p><strong>Rests:</strong></p>
<p>The special string name 'R' or 'r' represents a musical rest. The key number of
a rest is -1, its hertz value is 0.0 and its Pitch is an empty pitch: Pitch().</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="musx.scales.hertz"><code class="name flex">
<span>def <span class="ident">hertz</span></span>(<span>ref, filt=&lt;built-in function round&gt;)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns hertz values from a pitch name, key number, a list
of the same, or a string sequence of the same.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ref</code></strong> :&ensp;<code>string, int</code> or <code>float</code></dt>
<dd>A pitch name or midi key number to convert to a hertz value.</dd>
<dt><strong><code>filt</code></strong> :&ensp;<code>function | None</code></dt>
<dd>A function of one argument maps a floating point key number
to an integer.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>If ref is a pitch name or key number its hertz hash table
value is returned.</p>
<p>If ref is a python list of pitch names or key numbers
then a list of hertz values is returned.</p>
<p>If ref is a string of key numbers
delimited by spaces then a list of hertz values is returned. </p>
<p>If ref is a string of pitch names then a list of hertz values
are returned. Items in this list can be directly repeated by appending
','
to an item for each repetition. If the items are pitch names then
if a pitch does not contain an explicit octave then it inherits the
previous octave number in the list. If no octave number is provided the
the middle C octave (4) is used as the inital octave.</p>
<h2 id="raises">Raises</h2>
<p>ValueError if ref is not a pitch name, key number or list of the same.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python">&gt;&gt;&gt; hertz('C#4')
277.1826309768721
&gt;&gt;&gt; hertz(100)
2637.02045530296
&gt;&gt;&gt; hertz(['Cb4', 'D#6'])
[246.94165062806206, 1244.5079348883237]
&gt;&gt;&gt; hertz([48, 60, 72])
[130.8127826502993, 261.6255653005986, 523.2511306011972]
&gt;&gt;&gt; hertz('cs4 d b3')
[277.1826309768721, 293.6647679174076, 246.94165062806206]
&gt;&gt;&gt; hertz('48, 60')
[130.8127826502993, 130.8127826502993, 261.6255653005986]
</code></pre></div>
</dd>
<dt id="musx.scales.keynum"><code class="name flex">
<span>def <span class="ident">keynum</span></span>(<span>ref, filt=&lt;built-in function round&gt;)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns key numbers from a pitch name, hertz value, a list
of the same, or a string sequence of the same.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ref</code></strong> :&ensp;<code>string | int | float | list</code></dt>
<dd>A pitch name, hertz value, list of the same, or a string
containing a sequence of the same separated by spaces.</dd>
<dt><strong><code>filt</code></strong> :&ensp;<code>function | None</code></dt>
<dd>A function of one argument maps a floating point key number
to an integer. The default is math.round, but math.floor and
math.ceil could also be used. If filt is None then a floating
point key number is returned. In a floating point key number, the
first two digits of the fractional portion are interpreted as
the number of cents above the integer midi value.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>If ref is a pitch its hash table value is returned.</p>
<p>If ref is a hertz value its key number is calculated, filtered
and returned (see the filt parameter).</p>
<p>If ref is a python list of pitch names or hertz values
then a list of key numbers is returned.</p>
<p>If ref is a string of hertz values
delimited by spaces then a list of key numbers is returned. </p>
<p>If ref is a string of pitch names then a list of key numbers
are returned. Items in the list can be directly repeated by
appending ',' to an item for each repetition. If the items are
pitch names then if a pitch does not contain an explicit octave
then it inherits the previous octave number in the list.
If no octave number is provided the the middle C octave (4)
is used as the inital octave.</p>
<h2 id="raises">Raises</h2>
<p>ValueError if ref is not a pitch name, hertz value or list of the same.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python">&gt;&gt;&gt; keynum('C#4')
61
&gt;&gt;&gt; keynum(100)
43
&gt;&gt;&gt; keynum(['Cb4', 'D#6'])
[59, 87]
&gt;&gt;&gt; keynum([100, 200, 300])
[43, 55, 62]
&gt;&gt;&gt; keynum('cs4 d e,, f g3 a b')
[61, 62, 64, 64, 64, 65, 55, 57, 59]
&gt;&gt;&gt; keynum('100, 200, 300')
[43, 43, 55, 55, 62]
</code></pre></div>
</dd>
<dt id="musx.scales.pitch"><code class="name flex">
<span>def <span class="ident">pitch</span></span>(<span>ref, filt=&lt;built-in function round&gt;, *, hz=False, acc=[])</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the pitch name from a hertz value, key number, a
list of the same, or a string sequence of the same.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ref</code></strong> :&ensp;<code>int</code> or <code>float</code></dt>
<dd>A key number or hertz value, depending on the value of the
hz parameter.</dd>
<dt><strong><code>filt</code></strong> :&ensp;<code>function | None</code></dt>
<dd>A function of one argument that maps a floating point key number
to an integer.</dd>
<dt><strong><code>hz</code></strong> :&ensp;<code>True | False</code></dt>
<dd>If True then ref is accepted as a hertz value otherwise it is
assumed to be a key number. The default value is False.</dd>
<dt><strong><code>acc</code></strong> :&ensp;<code>int | list</code></dt>
<dd>An ordered preference list of accidentals to use in the pitch spelling.
Values range from -2 (double flat) to 2 (double sharp) with 0 being
no accidental.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>If ref is a key number its hash table value is returned.</p>
<p>If ref is a hertz value its key number is calculated, filtered
to an int value and its hash table value is returned.</p>
<p>If ref is a python list of key numbers their hash values are returned.</p>
<p>If ref is a python list of hertz values they are converted to
key numbers and then processed as described in the previous point.</p>
<p>If ref is a string sequence of hertz values or key numbers they are
converted to a python list and treated as described above.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; pitch(60)
Pitch(&quot;C4&quot;)
&gt;&gt;&gt; pitch(60, acc=[1])
Pitch(&quot;B#3&quot;)
&gt;&gt;&gt; pitch(60, acc=[-2])
Pitch(&quot;Dbb4&quot;)
&gt;&gt;&gt; pitch(440*3/2, hz=True)
Pitch(&quot;E5&quot;)
&gt;&gt;&gt; pitch([48, 60, 72])
[Pitch(&quot;C3&quot;), Pitch(&quot;C4&quot;), Pitch(&quot;C5&quot;)]
&gt;&gt;&gt; pitch(&quot;67,, 63&quot;)
[Pitch(&quot;G4&quot;), Pitch(&quot;G4&quot;), Pitch(&quot;G4&quot;), Pitch(&quot;Eb4&quot;)]
</code></pre></div>
</dd>
<dt id="musx.scales.scale"><code class="name flex">
<span>def <span class="ident">scale</span></span>(<span>start, length, *steps, fit=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a list of key numbers beginning on start and incremented by
successive interval increments. The step values loop if the
length of the scale is greater than the number of intervals in steps.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>start</code></strong> :&ensp;<code>int | float</code></dt>
<dd>The initial key number that starts the scale.</dd>
<dt><strong><code>length</code></strong> :&ensp;<code>int</code></dt>
<dd>The length of the scale including the start.</dd>
<dt><strong><code>steps</code></strong> :&ensp;<code>ints | floats | list | tuple</code></dt>
<dd>An in-line (variadic) series of increments defining the
intervals beween the key numbers in the scale. This series
can also be specified as a single list or tuple of increments.</dd>
<dt><strong><code>fit</code></strong> :&ensp;<code>None | [lb, ub, mode]</code></dt>
<dd>Limits placed on the range of the scale. If the value is None there
are no limits. Otherwise fit should be a list or tuple of 3
elements containing a lower bound, upper bound and string mode.
See: <code><a title="musx.tools.fit" href="tools.html#musx.tools.fit">fit()</a></code> for more information.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>A list of key numbers defining the scale.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python"># 16 note (3 octave) pentatonic scale on C#4
&gt;&gt;&gt; scale(61, 16, 2, 3, 2, 2, 3)
[60, 62, 65, 67, 69, 72, 74, 77, 79, 81, 84, 86, 89, 91, 93, 96]
# one octave of the octotonic scale
&gt;&gt;&gt; scale(60, 9, 1, 2)
[60, 61, 63, 64, 66, 67, 69, 70, 72]
# interval cycle
&gt;&gt;&gt; scale(60, 12, (1, 2, 3, 4, 5))
[60, 61, 63, 66, 70, 75, 76, 78, 81, 85]
# cycle of fifths compressed to one octave
&gt;&gt;&gt; pitch(scale(0, 12, 7, fit=[60, 72, 'wrap']))
['C5', 'G4', 'D4', 'A4', 'E4', 'B4', 'F#4', 'C#4', 'Ab4', 'Eb4', 'Bb4', 'F4']
</code></pre></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="musx" href="index.html">musx</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="musx.scales.hertz" href="#musx.scales.hertz">hertz</a></code></li>
<li><code><a title="musx.scales.keynum" href="#musx.scales.keynum">keynum</a></code></li>
<li><code><a title="musx.scales.pitch" href="#musx.scales.pitch">pitch</a></code></li>
<li><code><a title="musx.scales.scale" href="#musx.scales.scale">scale</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>